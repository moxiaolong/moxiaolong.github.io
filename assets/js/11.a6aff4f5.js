(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{327:function(a,t,s){"use strict";s.r(t);var n=s(8),e=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"属性一致校验"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#属性一致校验"}},[a._v("#")]),a._v(" 属性一致校验")]),a._v(" "),t("p",[a._v("entry.属性=:参数 类型不一致报错，而且Date和LocalDate框架不能自己转换...必须一致。")]),a._v(" "),t("p",[a._v("而且，这种错要到调用时才能报错...")]),a._v(" "),t("h2",{attrs:{id:"手写update"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手写update"}},[a._v("#")]),a._v(" 手写Update")]),a._v(" "),t("p",[a._v("手写Update除了"),t("code",[a._v("@Query")]),a._v("外还要加"),t("code",[a._v("@Modifying")]),a._v("，同时必须开启事物，如果不需要事务，可以在接口里直接加"),t("code",[a._v("@Transactional")]),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"save方法默认会空值覆盖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#save方法默认会空值覆盖"}},[a._v("#")]),a._v(" save方法默认会空值覆盖")]),a._v(" "),t("p",[a._v("在实体类添加注解，在save时如果是空值就忽略，否则会将数据库覆盖为空。")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@DynamicInsert")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@DynamicUpdate")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h2",{attrs:{id:"save在无id时是新增-有id时是修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#save在无id时是新增-有id时是修改"}},[a._v("#")]),a._v(" save在无Id时是新增，有Id时是修改")]),a._v(" "),t("p",[a._v("所以在新增接受前端对象时要对id做set null，以免被当作修改。")]),a._v(" "),t("h2",{attrs:{id:"自动更新创建时间和修改时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动更新创建时间和修改时间"}},[a._v("#")]),a._v(" 自动更新创建时间和修改时间")]),a._v(" "),t("p",[a._v("对应字段添加注解")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@CreatedDate")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@LastModifiedDate")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("实体类添加注解")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@EntityListeners")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AuditingEntityListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("SpringBoot启动类添加注解")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@EnableJpaAuditing")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("另外数据库添加相应控制也可以：\ncreateTime ： CURRENT_TIMESTAMP\nmodifyTime ： CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP")]),a._v(" "),t("h2",{attrs:{id:"指定索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定索引"}},[a._v("#")]),a._v(" 指定索引")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Table")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('" "')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("indexs "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("columnList"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"col1,col2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"逻辑删除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#逻辑删除"}},[a._v("#")]),a._v(" 逻辑删除")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@SQLDelete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("sql "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"update table set is_deleted=1 where id = ?"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Where")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("caluse "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"is_deleted=1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);